from aiogram import Router, F
from aiogram.types import Message
from aiogram.fsm.context import FSMContext
from telethon import TelegramClient
from telethon.errors import SessionPasswordNeededError
from ..states.states import BotStates
from ..database.db import db
from ..middleware.auth import IsAdmin

router = Router()

@router.message(F.text == "âš™ï¸ ĞĞ´Ğ¼Ğ¸Ğ½ Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ", IsAdmin())
async def admin_panel(message: Message):
    stats = await db.get_admin_stats()
    await message.answer(
        f"ğŸ‘¤ Ğ’ÑĞµĞ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹: {stats['total_users']}\n"
        f"ğŸ’ ĞŸÑ€ĞµĞ¼Ğ¸ÑƒĞ¼ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹: {stats['premium_users']}\n"
        f"ğŸ“Š ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ: {stats['active_today']}"
    ) 